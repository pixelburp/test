<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>gameQuery shim</title>
		<!---<script language="JavaScript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>-->
		<!--<script language="JavaScript" type="text/javascript" src="src/jquery.gamequery-0.7.0.js"></script>-->
		<script type="text/javascript" src="src/crafty-min.js"></script>
		<script type="text/javascript" src="assets/Circle.js"></script>
		<script type="text/javascript" src="assets/Player.js"></script>
		<script type="text/javascript" src="lib/PlayerControls.js"></script>


<script type="text/javascript">
function createworld() {

	for (var i = 0; i < 25; i++) {
        for (var j = 0; j < 21; j++) {

            //place grass on all tiles
            grassType = Crafty.math.randomInt(1, 4);
            Crafty.e("2D, DOM, grass" + grassType)
                .attr({ x: i * 16, y: j * 16, z:1 });

			//create a fence of bushes
			if(i === 0 || i === 24 || j === 0 || j === 20)
			    Crafty.e("2D, DOM, solid, bush" + Crafty.math.randomInt(1, 2))
			    .attr({ x: i * 16, y: j * 16, z: 2 });
			//generate some nice flowers within the boundaries of the outer bushes
			if (i > 0 && i < 24 && j > 0 && j < 20
			        && Crafty.math.randomInt(0, 50) > 30
			        && !(i === 1 && j >= 16)
			        && !(i === 23 && j <= 4)) {
			    var f = Crafty.e("2D, DOM, flower, solid, SpriteAnimation, explodable")
			            .attr({ x: i * 16, y: j * 16, z: 1000 })
			            .animate("wind", 0, 1, 3)
			            .animate('wind', 80, -1)
			            .bind('explode', function() {
			                this.destroy();
			            });
			}

               //grid of bushes
            if((i % 2 === 0) && (j % 2 === 0)) {
                Crafty.e("2D, DOM, solid, bush3")
                    .attr({x: i * 16, y: j * 16, z: 2000})
            }
        }
    }
}
</script>

		<script type="text/javascript">
			window.onload = function () {
			    //start crafty
			    Crafty.init(400, 336);
			    Crafty.background('#ccc');
			    Crafty.canvas.init();

			    

Crafty.scene("loading", function () {
    //load takes an array of assets and a callback when complete
    Crafty.load([
    	"images/bananabomber-sprites.png",
    	"images/bomb_party_v4.png"
    ], function () {
        Crafty.scene("main"); //when everything is loaded, run the main scene
    });

    //black background with some loading text
    Crafty.background("#000");
    Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 })
            .text("Loading")
            .css({ "text-align": "center", 'color': '#fff' });
});

Crafty.scene("loading");

Crafty.scene("main", function () {
    var paddle = new Circle();

//turn the sprite map into usable components
Crafty.sprite(16, "images/bananabomber-sprites.png", {
    grass1: [0, 0],
    grass2: [1, 0],
    grass3: [2, 0],
    grass4: [3, 0],
    flower: [0, 1],
    bush1: [0, 2],
    bush2: [1, 2],
    player: [0, 3],
    enemy: [0, 3],
    banana: [4, 0],
    empty: [4, 0]
});

Crafty.sprite(16, "images/bomb_party_v4.png", {
	bush3: [9, 13]
});

createworld();

var myplayer = new Player();
       

}); // end scene

			};
			
		</script>

	</head>
	<body>
		<div id="playground">
			
		</div>
	</body>
</html>